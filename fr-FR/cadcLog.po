# 
# AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: 0\n"
"POT-Creation-Date: 2016-03-04 12:35+0100\n"
"PO-Revision-Date: 2016-03-04 12:35+0100\n"
"Last-Translator: Automatically generated\n"
"Language-Team: None\n"
"MIME-Version: 1.0\n"
"Content-Type: application/x-publican; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. Tag: title
#, no-c-format
msgid "cadcLog Utility"
msgstr ""

#. Tag: para
#, no-c-format
msgid "This chapter explains how to use cadcLog utility."
msgstr ""

#. Tag: para
#, no-c-format
msgid "cadcLog in a utility to get control of the logging configuration. Specifically, it is a singe custom servlet to configure logging."
msgstr ""

#. Tag: title
#, no-c-format
msgid "cadcLog: web.xml for servlet deployment"
msgstr ""

#. Tag: para
#, no-c-format
msgid "To deploy the logControl servlet, in the deployment descriptor file web.xml there must be:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"  &lt;servlet&gt;\n"
"    &lt;!--\n"
"        To make sure the logging level gets set before any\n"
"        logging gets done, set load-on-startup to a smaller\n"
"        whole number than is used for any other servlet\n"
"        in this webapp.  This assumes Tomcat 5.5 or later.\n"
"    --&gt;\n"
"    &lt;servlet-name&gt;logControl&lt;/servlet-name&gt;\n"
"    &lt;servlet-class&gt;ca.nrc.cadc.log.LogControlServlet&lt;/servlet-class&gt;\n"
"    &lt;init-param&gt;\n"
"      &lt;param-name&gt;logLevel&lt;/param-name&gt;\n"
"      &lt;param-value&gt;info&lt;/param-value&gt;\n"
"    &lt;/init-param&gt;\n"
"    &lt;init-param&gt;\n"
"      &lt;param-name&gt;logLevelPackages&lt;/param-name&gt;\n"
"      &lt;param-value&gt;\n"
"        ca.nrc.cadc.auth\n"
"        ca.nrc.cadc.ac\n"
"        ca.nrc.cadc.vosi\n"
"      &lt;/param-value&gt;\n"
"    &lt;/init-param&gt;\n"
"    &lt;init-param&gt;\n"
"        &lt;param-name&gt;logAccessGroup&lt;/param-name&gt;\n"
"        &lt;param-value&gt;CADC&lt;/param-value&gt;\n"
"    &lt;/init-param&gt;\n"
"    &lt;init-param&gt;\n"
"        &lt;param-name&gt;groupAuthorizer&lt;/param-name&gt;\n"
"        &lt;param-value&gt;ca.nrc.cadc.auth.CADCGroupAuthorizer&lt;/param-value&gt;\n"
"    &lt;/init-param&gt;\n"
"    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n"
"  &lt;/servlet&gt;\n"
"\n"
"  &lt;!--\n"
"           The Log service\n"
"  --&gt;\n"
"  &lt;servlet-mapping&gt;\n"
"    &lt;servlet-name&gt;logControl&lt;/servlet-name&gt;\n"
"    &lt;url-pattern&gt;/logControl&lt;/url-pattern&gt;\n"
"  &lt;/servlet-mapping&gt;\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "A good security assesment is suggested:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"  &lt;!-- Define the public security role --&gt;\n"
"  &lt;security-role&gt;\n"
"    &lt;description&gt;Public security role&lt;/description&gt;\n"
"    &lt;role-name&gt;public&lt;/role-name&gt;\n"
"  &lt;/security-role&gt;\n"
"\n"
"  &lt;!-- Define a security constraint for auth servlet --&gt;\n"
"  &lt;security-constraint&gt;\n"
"    &lt;web-resource-collection&gt;\n"
"      &lt;web-resource-name&gt;auth&lt;/web-resource-name&gt;\n"
"      &lt;description/&gt;\n"
"      &lt;url-pattern&gt;/logControl/*&lt;/url-pattern&gt;\n"
"      &lt;http-method&gt;GET&lt;/http-method&gt;\n"
"      &lt;http-method&gt;POST&lt;/http-method&gt;\n"
"      &lt;http-method&gt;HEAD&lt;/http-method&gt;\n"
"      &lt;http-method&gt;PUT&lt;/http-method&gt;\n"
"      &lt;http-method&gt;OPTIONS&lt;/http-method&gt;\n"
"      &lt;http-method&gt;TRACE&lt;/http-method&gt;\n"
"      &lt;http-method&gt;DELETE&lt;/http-method&gt;\n"
"    &lt;/web-resource-collection&gt;\n"
"    &lt;auth-constraint&gt;\n"
"      &lt;description&gt;force authentication for all requests&lt;/description&gt;\n"
"      &lt;role-name&gt;public&lt;/role-name&gt;\n"
"    &lt;/auth-constraint&gt;\n"
"  &lt;/security-constraint&gt;\n"
"\n"
"  &lt;!--\n"
"           BASIC Http Authentication for logControl\n"
"  --&gt;\n"
"  &lt;login-config&gt;\n"
"    &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n"
"    &lt;realm-name&gt;Canadian Astronomy Data Centre&lt;/realm-name&gt;\n"
"  &lt;/login-config&gt;\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "In production environment it is suggested to have some access control in place to prevent people from messing with the logging config."
msgstr ""

#. Tag: para
#, no-c-format
msgid "For debug purpose the access control can be disabled. For logging it is needed to modify the web.xml to remove auth restrictions so control logging levels could be changed without authentication. To achieve this result, first, to find the servlet with &lt;servlet-name&gt;logControl&lt;/servlet-name&gt; and to remove (comment out) the following init-params:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"     &lt;init-param&gt;\n"
"         &lt;param-name&gt;logAccessGroup&lt;/param-name&gt;\n"
"         &lt;param-value&gt;CADC&lt;/param-value&gt;\n"
"     &lt;/init-param&gt;\n"
"     &lt;init-param&gt;\n"
"         &lt;param-name&gt;groupAuthorizer&lt;/param-name&gt;\n"
"         &lt;param-value&gt;ca.nrc.cadc.auth.CADCGroupAuthorizer&lt;/param-value&gt;\n"
"     &lt;/init-param&gt;\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "Also to find the &lt;security-constraint&gt; section at the bottom of the web.xml. Inside there is a pattern: &lt;url-pattern&gt;/logControl/*&lt;/url-pattern&gt;"
msgstr ""

#. Tag: para
#, no-c-format
msgid "To comment that line out so it will be possible to access the LogControlServlet without authenticating."
msgstr ""

#. Tag: para
#, no-c-format
msgid "To restart tomcat after changing the web.xml file and to check the logs for the startup messages from the LogControlServlet."
msgstr ""

#. Tag: para
#, no-c-format
msgid "The initial logging level configuration is usually iat INFO level for operational use and the web.xml set can be leaved to this good operational level. For debugging, it is easier to change the logging dynamically in the running service (see below)."
msgstr ""

#. Tag: title
#, no-c-format
msgid "Dynamically control logging config in a running service"
msgstr ""

#. Tag: para
#, no-c-format
msgid "The cadcLog module in core module of opencadc github repository contains a script for changing the log levels in a running service. This is a simple bash script that uses curl to interact with the LogControlServlet."
msgstr ""

#. Tag: para
#, no-c-format
msgid "To see the current config:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"${CADC_PREFIX}/cadcLog/scripts/cadcLogSet --get http://localhost:8080/ac/logControl\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "To increase logging to DEBUG:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"${CADC_PREFIX}/cadcLog/scripts/cadcLogSet --set http://localhost:8080/ac/logControl DEBUG\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "Note that the packages that are affected are only the ones listed in the LogControlServlet, by default:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"&lt;init-param&gt;\n"
"&lt;param-name&gt;logLevelPackages&lt;/param-name&gt;\n"
"&lt;param-value&gt;\n"
" ca.nrc.cadc.auth\n"
" ca.nrc.cadc.ac\n"
" ca.nrc.cadc.vosi\n"
"&lt;/param-value&gt;\n"
"&lt;/init-param&gt;\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "To add a new package so you can see log messages from it too:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"${CADC_PREFIX}/cadcLog/scripts/cadcLogSet --set http://localhost:8080/ac/logControl DEBUG ca.nrc.cadc.util\n"
""
msgstr ""

#. Tag: para
#, no-c-format
msgid "Check the current logging config:"
msgstr ""

#. Tag: para
#, no-c-format
msgid "After some debugging, it is kindly suggested to change the level pack to INFO:"
msgstr ""

#. Tag: screen
#, no-c-format
msgid "\n"
"${CADC_PREFIX}/cadcLog/scripts/cadcLogSet --set http://localhost:8080/ac/logControl INFO\n"
""
msgstr ""

